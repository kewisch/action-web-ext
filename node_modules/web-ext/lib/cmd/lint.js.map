{"version":3,"file":"lint.js","names":["createInstance","defaultLinterCreator","createLogger","createFileFilter","defaultFileFilterCreator","log","import","meta","url","lint","artifactsDir","boring","ignoreFiles","metadata","output","pretty","privileged","sourceDir","selfHosted","verbose","warningsAsErrors","createLinter","shouldExitProgram","fileFilter","config","logLevel","stack","Boolean","shouldScanFile","fileName","wantFile","minManifestVersion","maxManifestVersion","_","debug","linter","runAsBinary","run"],"sources":["../../src/cmd/lint.js"],"sourcesContent":["import { createInstance as defaultLinterCreator } from 'addons-linter';\n\nimport { createLogger } from '../util/logger.js';\nimport { createFileFilter as defaultFileFilterCreator } from '../util/file-filter.js';\n\nconst log = createLogger(import.meta.url);\n\n// Lint command types and implementation.\n\nexport default function lint(\n  {\n    artifactsDir,\n    boring,\n    ignoreFiles,\n    metadata,\n    output,\n    pretty,\n    privileged,\n    sourceDir,\n    selfHosted,\n    verbose,\n    warningsAsErrors,\n  },\n  {\n    createLinter = defaultLinterCreator,\n    createFileFilter = defaultFileFilterCreator,\n    shouldExitProgram = true,\n  } = {},\n) {\n  const fileFilter = createFileFilter({ sourceDir, ignoreFiles, artifactsDir });\n\n  const config = {\n    logLevel: verbose ? 'debug' : 'fatal',\n    stack: Boolean(verbose),\n    pretty,\n    privileged,\n    warningsAsErrors,\n    metadata,\n    output,\n    boring,\n    selfHosted,\n    shouldScanFile: (fileName) => fileFilter.wantFile(fileName),\n    minManifestVersion: 2,\n    maxManifestVersion: 3,\n    // This mimics the first command line argument from yargs, which should be\n    // the directory to the extension.\n    _: [sourceDir],\n  };\n\n  log.debug(`Running addons-linter on ${sourceDir}`);\n  const linter = createLinter({ config, runAsBinary: shouldExitProgram });\n  return linter.run();\n}\n"],"mappings":"AAAA,SAASA,cAAc,IAAIC,oBAAoB,QAAQ,eAAe;AAEtE,SAASC,YAAY,QAAQ,mBAAmB;AAChD,SAASC,gBAAgB,IAAIC,wBAAwB,QAAQ,wBAAwB;AAErF,MAAMC,GAAG,GAAGH,YAAY,CAACI,MAAM,CAACC,IAAI,CAACC,GAAG,CAAC;;AAEzC;;AAEA,eAAe,SAASC,IAAIA,CAC1B;EACEC,YAAY;EACZC,MAAM;EACNC,WAAW;EACXC,QAAQ;EACRC,MAAM;EACNC,MAAM;EACNC,UAAU;EACVC,SAAS;EACTC,UAAU;EACVC,OAAO;EACPC;AACF,CAAC,EACD;EACEC,YAAY,GAAGpB,oBAAoB;EACnCE,gBAAgB,GAAGC,wBAAwB;EAC3CkB,iBAAiB,GAAG;AACtB,CAAC,GAAG,CAAC,CAAC,EACN;EACA,MAAMC,UAAU,GAAGpB,gBAAgB,CAAC;IAAEc,SAAS;IAAEL,WAAW;IAAEF;EAAa,CAAC,CAAC;EAE7E,MAAMc,MAAM,GAAG;IACbC,QAAQ,EAAEN,OAAO,GAAG,OAAO,GAAG,OAAO;IACrCO,KAAK,EAAEC,OAAO,CAACR,OAAO,CAAC;IACvBJ,MAAM;IACNC,UAAU;IACVI,gBAAgB;IAChBP,QAAQ;IACRC,MAAM;IACNH,MAAM;IACNO,UAAU;IACVU,cAAc,EAAGC,QAAQ,IAAKN,UAAU,CAACO,QAAQ,CAACD,QAAQ,CAAC;IAC3DE,kBAAkB,EAAE,CAAC;IACrBC,kBAAkB,EAAE,CAAC;IACrB;IACA;IACAC,CAAC,EAAE,CAAChB,SAAS;EACf,CAAC;EAEDZ,GAAG,CAAC6B,KAAK,CAAC,4BAA4BjB,SAAS,EAAE,CAAC;EAClD,MAAMkB,MAAM,GAAGd,YAAY,CAAC;IAAEG,MAAM;IAAEY,WAAW,EAAEd;EAAkB,CAAC,CAAC;EACvE,OAAOa,MAAM,CAACE,GAAG,CAAC,CAAC;AACrB","ignoreList":[]}