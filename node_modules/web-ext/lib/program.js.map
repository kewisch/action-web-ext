{"version":3,"file":"program.js","names":["os","path","readFileSync","camelCase","decamelize","yargs","Parser","yargsParser","defaultCommands","UsageError","createLogger","consoleStream","defaultLogStream","coerceCLICustomPreference","checkForUpdates","defaultUpdateChecker","discoverConfigFiles","defaultConfigDiscovery","loadJSConfigFile","defaultLoadJSConfigFile","applyConfigToArgv","defaultApplyConfigToArgv","log","import","meta","url","envPrefix","defaultGlobalEnv","Program","constructor","argv","absolutePackageDir","process","cwd","slice","programArgv","yargsInstance","verboseEnabled","shouldExitProgram","parserConfiguration","strict","wrap","terminalWidth","commands","options","command","name","description","executor","commandOptions","yargsForCmd","demandCommand","undefined","exitProcess","env","setGlobalOptions","Object","keys","forEach","key","global","demandOption","enableVerboseMode","logStream","version","makeVerbose","info","getArguments","validationInstance","getInternalMethods","getValidationInstance","requiredArguments","demandedOptions","getDemandedOptions","args","err","message","startsWith","configDiscovery","noConfigDiscovery","reload","noReload","input","noInput","ignoreFiles","length","startUrl","Array","isArray","firefoxPreview","checkRequiredArguments","adjustedArgv","cleanupProcessEnvConfigs","systemProcess","cmd","_","toOptionKey","k","replace","separator","filter","optKey","globalOpt","cmdOpt","debug","execute","getVersion","defaultVersionGetter","globalEnv","runCommand","verbose","configFiles","discoveredConfigs","push","config","resolve","niceFileList","map","f","homedir","join","configFileName","configObject","argvFromCLI","error","stack","String","code","exit","packageData","JSON","parse","git","branch","long","throwUsageErrorIfArray","errorMessage","value","main","runOptions","program","usage","help","alias","recommendCommands","describe","default","requiresArg","type","coerce","arg","normalize","hidden","build","sign","run","choices","lint","docs"],"sources":["../src/program.js"],"sourcesContent":["/* @flow */\nimport os from 'os';\nimport path from 'path';\nimport {readFileSync} from 'fs';\n\nimport camelCase from 'camelcase';\nimport decamelize from 'decamelize';\nimport yargs from 'yargs';\nimport { Parser as yargsParser } from 'yargs/helpers';\n\nimport defaultCommands from './cmd/index.js';\nimport {UsageError} from './errors.js';\nimport {\n  createLogger,\n  consoleStream as defaultLogStream,\n} from './util/logger.js';\nimport {coerceCLICustomPreference} from './firefox/preferences.js';\nimport {checkForUpdates as defaultUpdateChecker} from './util/updates.js';\nimport {\n  discoverConfigFiles as defaultConfigDiscovery,\n  loadJSConfigFile as defaultLoadJSConfigFile,\n  applyConfigToArgv as defaultApplyConfigToArgv,\n} from './config.js';\n\nconst log = createLogger(import.meta.url);\nconst envPrefix = 'WEB_EXT';\n// Default to \"development\" (the value actually assigned will be interpolated\n// by babel-plugin-transform-inline-environment-variables).\nconst defaultGlobalEnv = process.env.WEBEXT_BUILD_ENV || 'development';\n\n\ntype ProgramOptions = {\n  absolutePackageDir?: string,\n}\n\nexport type VersionGetterFn = (absolutePackageDir: string) => Promise<string>;\n\n// TODO: add pipes to Flow type after https://github.com/facebook/flow/issues/2405 is fixed\n\ntype ExecuteOptions = {\n  checkForUpdates?: Function,\n  systemProcess?: typeof process,\n  logStream?: typeof defaultLogStream,\n  getVersion?: VersionGetterFn,\n  applyConfigToArgv?: typeof defaultApplyConfigToArgv,\n  discoverConfigFiles?: typeof defaultConfigDiscovery,\n  loadJSConfigFile?: typeof defaultLoadJSConfigFile,\n  shouldExitProgram?: boolean,\n  globalEnv?: string | void,\n}\n\n\n/*\n * The command line program.\n */\nexport class Program {\n  absolutePackageDir: string;\n  yargs: any;\n  commands: { [key: string]: Function };\n  shouldExitProgram: boolean;\n  verboseEnabled: boolean;\n  options: Object;\n  programArgv: Array<string>;\n  demandedOptions: Object;\n\n  constructor(\n    argv: ?Array<string>,\n    {\n      absolutePackageDir = process.cwd(),\n    }: ProgramOptions = {}\n  ) {\n    // This allows us to override the process argv which is useful for\n    // testing.\n    // NOTE: process.argv.slice(2) removes the path to node and web-ext\n    // executables from the process.argv array.\n    argv = argv || process.argv.slice(2);\n    this.programArgv = argv;\n\n    // NOTE: always initialize yargs explicitly with the package dir\n    // to avoid side-effects due to yargs looking for its configuration\n    // section from a package.json file stored in an arbitrary directory\n    // (e.g. in tests yargs would end up loading yargs config from the\n    // mocha package.json). web-ext package.json doesn't contain any yargs\n    // section as it is deprecated and we configure yargs using\n    // yargs.parserConfiguration. See web-ext#469 for rationale.\n    const yargsInstance = yargs(argv, absolutePackageDir);\n\n    this.absolutePackageDir = absolutePackageDir;\n    this.verboseEnabled = false;\n    this.shouldExitProgram = true;\n\n    this.yargs = yargsInstance;\n    this.yargs.parserConfiguration({\n      'boolean-negation': true,\n    });\n    this.yargs.strict();\n    this.yargs.wrap(this.yargs.terminalWidth());\n\n    this.commands = {};\n    this.options = {};\n  }\n\n  command(\n    name: string, description: string, executor: Function,\n    commandOptions: Object = {}\n  ): Program {\n    this.options[camelCase(name)] = commandOptions;\n\n    this.yargs.command(name, description, (yargsForCmd) => {\n      if (!commandOptions) {\n        return;\n      }\n      return yargsForCmd\n        // Make sure the user does not add any extra commands. For example,\n        // this would be a mistake because lint does not accept arguments:\n        // web-ext lint ./src/path/to/file.js\n        .demandCommand(0, 0, undefined,\n                       'This command does not take any arguments')\n        .strict()\n        .exitProcess(this.shouldExitProgram)\n        // Calling env() will be unnecessary after\n        // https://github.com/yargs/yargs/issues/486 is fixed\n        .env(envPrefix)\n        .options(commandOptions);\n    });\n    this.commands[name] = executor;\n    return this;\n  }\n\n  setGlobalOptions(options: Object): Program {\n    // This is a convenience for setting global options.\n    // An option is only global (i.e. available to all sub commands)\n    // with the `global` flag so this makes sure every option has it.\n    this.options = {...this.options, ...options};\n    Object.keys(options).forEach((key) => {\n      options[key].global = true;\n      if (options[key].demandOption === undefined) {\n        // By default, all options should be \"demanded\" otherwise\n        // yargs.strict() will think they are missing when declared.\n        options[key].demandOption = true;\n      }\n    });\n    this.yargs.options(options);\n    return this;\n  }\n\n  enableVerboseMode(\n    logStream: typeof defaultLogStream,\n    version: string\n  ): void {\n    if (this.verboseEnabled) {\n      return;\n    }\n\n    logStream.makeVerbose();\n    log.info('Version:', version);\n    this.verboseEnabled = true;\n  }\n\n  // Retrieve the yargs argv object and apply any further fix needed\n  // on the output of the yargs options parsing.\n  getArguments(): Object {\n    // To support looking up required parameters via config files, we need to\n    // temporarily disable the requiredArguments validation. Otherwise yargs\n    // would exit early. Validation is enforced by the checkRequiredArguments()\n    // method, after reading configuration files.\n    //\n    // This is an undocumented internal API of yargs! Unit tests to avoid\n    // regressions are located at: tests/functional/test.cli.sign.js\n    //\n    // Replace hack if possible:  https://github.com/mozilla/web-ext/issues/1930\n    const validationInstance =\n      this.yargs.getInternalMethods().getValidationInstance();\n    const { requiredArguments } = validationInstance;\n    // Initialize demandedOptions (which is going to be set to an object with one\n    // property for each mandatory global options, then the arrow function below\n    // will receive as its demandedOptions parameter a new one that also includes\n    // all mandatory options for the sub command selected).\n    this.demandedOptions = this.yargs.getDemandedOptions();\n    validationInstance.requiredArguments = (args, demandedOptions) => {\n      this.demandedOptions = demandedOptions;\n    };\n    let argv;\n    try {\n      argv = this.yargs.argv;\n    } catch (err) {\n      if (err.name === 'YError' &&\n          err.message.startsWith('Unknown argument: ')) {\n        throw new UsageError(err.message);\n      }\n      throw err;\n    }\n    validationInstance.requiredArguments = requiredArguments;\n\n    // Yargs boolean options doesn't define the no* counterpart\n    // with negate-boolean on Yargs 15. Define as expected by the\n    // web-ext execute method.\n    if (argv.configDiscovery != null) {\n      argv.noConfigDiscovery = !argv.configDiscovery;\n    }\n    if (argv.reload != null) {\n      argv.noReload = !argv.reload;\n    }\n\n    // Yargs doesn't accept --no-input as a valid option if there isn't a\n    // --input option defined to be negated, to fix that the --input is\n    // defined and hidden from the yargs help output and we define here\n    // the negated argument name that we expect to be set in the parsed\n    // arguments (and fix https://github.com/mozilla/web-ext/issues/1860).\n    if (argv.input != null) {\n      argv.noInput = !argv.input;\n    }\n\n    // Replacement for the \"requiresArg: true\" parameter until the following bug\n    // is fixed: https://github.com/yargs/yargs/issues/1098\n    if (argv.ignoreFiles && !argv.ignoreFiles.length) {\n      throw new UsageError('Not enough arguments following: ignore-files');\n    }\n\n    if (argv.startUrl && !argv.startUrl.length) {\n      throw new UsageError('Not enough arguments following: start-url');\n    }\n\n    if (Array.isArray(argv.firefoxPreview) && !argv.firefoxPreview.length) {\n      argv.firefoxPreview = ['mv3'];\n    }\n\n    return argv;\n  }\n\n  // getArguments() disables validation of required parameters, to allow us to\n  // read parameters from config files first. Before the program continues, it\n  // must call checkRequiredArguments() to ensure that required parameters are\n  // defined (in the CLI or in a config file).\n  checkRequiredArguments(adjustedArgv: Object): void {\n    const validationInstance =\n      this.yargs.getInternalMethods().getValidationInstance();\n    validationInstance.requiredArguments(adjustedArgv, this.demandedOptions);\n  }\n\n  // Remove WEB_EXT_* environment vars that are not a global cli options\n  // or an option supported by the current command (See #793).\n  cleanupProcessEnvConfigs(systemProcess: typeof process) {\n    const cmd = yargsParser(this.programArgv)._[0];\n    const env = systemProcess.env || {};\n    const toOptionKey = (k) => decamelize(\n      camelCase(k.replace(envPrefix, '')), {separator: '-'}\n    );\n\n    if (cmd) {\n      Object.keys(env)\n        .filter((k) => k.startsWith(envPrefix))\n        .forEach((k) => {\n          const optKey = toOptionKey(k);\n          const globalOpt = this.options[optKey];\n          const cmdOpt = this.options[cmd] && this.options[cmd][optKey];\n\n          if (!globalOpt && !cmdOpt) {\n            log.debug(`Environment ${k} not supported by web-ext ${cmd}`);\n            delete env[k];\n          }\n        });\n    }\n  }\n\n  async execute(\n    {\n      checkForUpdates = defaultUpdateChecker,\n      systemProcess = process,\n      logStream = defaultLogStream,\n      getVersion = defaultVersionGetter,\n      applyConfigToArgv = defaultApplyConfigToArgv,\n      discoverConfigFiles = defaultConfigDiscovery,\n      loadJSConfigFile = defaultLoadJSConfigFile,\n      shouldExitProgram = true,\n      globalEnv = defaultGlobalEnv,\n    }: ExecuteOptions = {}\n  ): Promise<void> {\n    this.shouldExitProgram = shouldExitProgram;\n    this.yargs.exitProcess(this.shouldExitProgram);\n\n    this.cleanupProcessEnvConfigs(systemProcess);\n    const argv = this.getArguments();\n\n    const cmd = argv._[0];\n\n    const version = await getVersion(this.absolutePackageDir);\n    const runCommand = this.commands[cmd];\n\n    if (argv.verbose) {\n      this.enableVerboseMode(logStream, version);\n    }\n\n    let adjustedArgv = {...argv};\n\n    try {\n      if (cmd === undefined) {\n        throw new UsageError('No sub-command was specified in the args');\n      }\n      if (!runCommand) {\n        throw new UsageError(`Unknown command: ${cmd}`);\n      }\n      if (globalEnv === 'production') {\n        checkForUpdates({version});\n      }\n\n      const configFiles = [];\n\n      if (argv.configDiscovery) {\n        log.debug(\n          'Discovering config files. ' +\n          'Set --no-config-discovery to disable');\n        const discoveredConfigs = await discoverConfigFiles();\n        configFiles.push(...discoveredConfigs);\n      } else {\n        log.debug('Not discovering config files');\n      }\n\n      if (argv.config) {\n        configFiles.push(path.resolve(argv.config));\n      }\n\n      if (configFiles.length) {\n        const niceFileList = configFiles\n          .map((f) => f.replace(process.cwd(), '.'))\n          .map((f) => f.replace(os.homedir(), '~'))\n          .join(', ');\n        log.info(\n          'Applying config file' +\n          `${configFiles.length !== 1 ? 's' : ''}: ` +\n          `${niceFileList}`);\n      }\n\n      configFiles.forEach((configFileName) => {\n        const configObject = loadJSConfigFile(configFileName);\n        adjustedArgv = applyConfigToArgv({\n          argv: adjustedArgv,\n          argvFromCLI: argv,\n          configFileName,\n          configObject,\n          options: this.options,\n        });\n      });\n\n      if (adjustedArgv.verbose) {\n        // Ensure that the verbose is enabled when specified in a config file.\n        this.enableVerboseMode(logStream, version);\n      }\n\n      this.checkRequiredArguments(adjustedArgv);\n\n      await runCommand(adjustedArgv, {shouldExitProgram});\n\n    } catch (error) {\n      if (!(error instanceof UsageError) || adjustedArgv.verbose) {\n        log.error(`\\n${error.stack}\\n`);\n      } else {\n        log.error(`\\n${String(error)}\\n`);\n      }\n      if (error.code) {\n        log.error(`Error code: ${error.code}\\n`);\n      }\n\n      log.debug(`Command executed: ${cmd}`);\n\n      if (this.shouldExitProgram) {\n        systemProcess.exit(1);\n      } else {\n        throw error;\n      }\n    }\n  }\n}\n\n//A defintion of type of argument for defaultVersionGetter\ntype VersionGetterOptions = {\n  globalEnv?: string,\n};\n\nexport async function defaultVersionGetter(\n  absolutePackageDir: string,\n  {globalEnv = defaultGlobalEnv}: VersionGetterOptions = {}\n): Promise<string> {\n  if (globalEnv === 'production') {\n    log.debug('Getting the version from package.json');\n    const packageData: any = readFileSync(\n      path.join(absolutePackageDir, 'package.json'));\n    return JSON.parse(packageData).version;\n  } else {\n    log.debug('Getting version from the git revision');\n    // This branch is only reached during development.\n    // git-rev-sync is in devDependencies, and lazily imported using require.\n    // This also avoids logspam from https://github.com/mozilla/web-ext/issues/1916\n    // eslint-disable-next-line import/no-extraneous-dependencies\n    const git = await import('git-rev-sync');\n    return `${git.branch(absolutePackageDir)}-${git.long(absolutePackageDir)}`;\n  }\n}\n\n// TODO: add pipes to Flow type after https://github.com/facebook/flow/issues/2405 is fixed\n\ntype MainParams = {\n  getVersion?: VersionGetterFn,\n  commands?: Object,\n  argv: Array<any>,\n  runOptions?: Object,\n}\n\nexport function throwUsageErrorIfArray(errorMessage: string): any {\n  return (value: any): any => {\n    if (Array.isArray(value)) {\n      throw new UsageError(errorMessage);\n    }\n    return value;\n  };\n}\n\nexport async function main(\n  absolutePackageDir: string,\n  {\n    getVersion = defaultVersionGetter, commands = defaultCommands, argv,\n    runOptions = {},\n  }: MainParams = {}\n): Promise<any> {\n  const program = new Program(argv, {absolutePackageDir});\n  const version = await getVersion(absolutePackageDir);\n\n  // yargs uses magic camel case expansion to expose options on the\n  // final argv object. For example, the 'artifacts-dir' option is alternatively\n  // available as argv.artifactsDir.\n  program.yargs\n    .usage(`Usage: $0 [options] command\n\nOption values can also be set by declaring an environment variable prefixed\nwith $${envPrefix}_. For example: $${envPrefix}_SOURCE_DIR=/path is the same as\n--source-dir=/path.\n\nTo view specific help for any given command, add the command name.\nExample: $0 --help run.\n`)\n    .help('help')\n    .alias('h', 'help')\n    .env(envPrefix)\n    .version(version)\n    .demandCommand(1, 'You must specify a command')\n    .strict()\n    .recommendCommands();\n\n  program.setGlobalOptions({\n    'source-dir': {\n      alias: 's',\n      describe: 'Web extension source directory.',\n      default: process.cwd(),\n      requiresArg: true,\n      type: 'string',\n      coerce: (arg) => arg != null ? path.resolve(arg) : undefined,\n    },\n    'artifacts-dir': {\n      alias: 'a',\n      describe: 'Directory where artifacts will be saved.',\n      default: path.join(process.cwd(), 'web-ext-artifacts'),\n      normalize: true,\n      requiresArg: true,\n      type: 'string',\n    },\n    'verbose': {\n      alias: 'v',\n      describe: 'Show verbose output',\n      type: 'boolean',\n      demandOption: false,\n    },\n    'ignore-files': {\n      alias: 'i',\n      describe: 'A list of glob patterns to define which files should be ' +\n                'ignored. (Example: --ignore-files=path/to/first.js ' +\n                'path/to/second.js \"**/*.log\")',\n      demandOption: false,\n      // The following option prevents yargs>=11 from parsing multiple values,\n      // so the minimum value requirement is enforced in execute instead.\n      // Upstream bug: https://github.com/yargs/yargs/issues/1098\n      // requiresArg: true,\n      type: 'array',\n    },\n    'no-input': {\n      describe: 'Disable all features that require standard input',\n      type: 'boolean',\n      demandOption: false,\n    },\n    'input': {\n      // This option is defined to make yargs to accept the --no-input\n      // defined above, but we hide it from the yargs help output.\n      hidden: true,\n      type: 'boolean',\n      demandOption: false,\n    },\n    'config': {\n      alias: 'c',\n      describe: 'Path to a CommonJS config file to set ' +\n        'option defaults',\n      default: undefined,\n      demandOption: false,\n      requiresArg: true,\n      type: 'string',\n    },\n    'config-discovery': {\n      describe: 'Discover config files in home directory and ' +\n        'working directory. Disable with --no-config-discovery.',\n      demandOption: false,\n      default: true,\n      type: 'boolean',\n    },\n  });\n\n  program\n    .command(\n      'build',\n      'Create an extension package from source',\n      commands.build, {\n        'as-needed': {\n          describe: 'Watch for file changes and re-build as needed',\n          type: 'boolean',\n        },\n        'filename': {\n          alias: 'n',\n          describe: 'Name of the created extension package file.',\n          default: undefined,\n          normalize: false,\n          demandOption: false,\n          requiresArg: true,\n          type: 'string',\n          coerce: (arg) => arg == null ?\n            undefined : throwUsageErrorIfArray(\n              'Multiple --filename/-n option are not allowed'\n            )(arg),\n        },\n        'overwrite-dest': {\n          alias: 'o',\n          describe: 'Overwrite destination package if it exists.',\n          type: 'boolean',\n        },\n      })\n    .command(\n      'sign',\n      'Sign the extension so it can be installed in Firefox',\n      commands.sign, {\n        'api-key': {\n          describe: 'API key (JWT issuer) from addons.mozilla.org',\n          demandOption: true,\n          type: 'string',\n        },\n        'api-secret': {\n          describe: 'API secret (JWT secret) from addons.mozilla.org',\n          demandOption: true,\n          type: 'string',\n        },\n        'api-url-prefix': {\n          describe: 'Signing API URL prefix',\n          default: 'https://addons.mozilla.org/api/v4',\n          demandOption: true,\n          type: 'string',\n        },\n        'api-proxy': {\n          describe:\n            'Use a proxy to access the signing API. ' +\n            'Example: https://yourproxy:6000 ',\n          demandOption: false,\n          type: 'string',\n        },\n        'id': {\n          describe:\n            'A custom ID for the extension. This has no effect if the ' +\n            'extension already declares an explicit ID in its manifest.',\n          demandOption: false,\n          type: 'string',\n        },\n        'timeout': {\n          describe: 'Number of milliseconds to wait before giving up',\n          type: 'number',\n        },\n        'channel': {\n          describe: 'The channel for which to sign the addon. Either ' +\n          '\\'listed\\' or \\'unlisted\\'',\n          type: 'string',\n        },\n      })\n    .command('run', 'Run the extension', commands.run, {\n      'target': {\n        alias: 't',\n        describe: 'The extensions runners to enable. Specify this option ' +\n                  'multiple times to run against multiple targets.',\n        default: 'firefox-desktop',\n        demandOption: false,\n        type: 'array',\n        choices: ['firefox-desktop', 'firefox-android', 'chromium'],\n      },\n      'firefox': {\n        alias: ['f', 'firefox-binary'],\n        describe: 'Path or alias to a Firefox executable such as firefox-bin ' +\n                  'or firefox.exe. ' +\n                  'If not specified, the default Firefox will be used. ' +\n                  'You can specify the following aliases in lieu of a path: ' +\n                  'firefox, beta, nightly, firefoxdeveloperedition. ' +\n                  'For Flatpak, use `flatpak:org.mozilla.firefox` where ' +\n                  '`org.mozilla.firefox` is the application ID.',\n        demandOption: false,\n        type: 'string',\n      },\n      'firefox-profile': {\n        alias: 'p',\n        describe: 'Run Firefox using a copy of this profile. The profile ' +\n                  'can be specified as a directory or a name, such as one ' +\n                  'you would see in the Profile Manager. If not specified, ' +\n                  'a new temporary profile will be created.',\n        demandOption: false,\n        type: 'string',\n      },\n      'chromium-binary': {\n        describe: 'Path or alias to a Chromium executable such as ' +\n          'google-chrome, google-chrome.exe or opera.exe etc. ' +\n          'If not specified, the default Google Chrome will be used.',\n        demandOption: false,\n        type: 'string',\n      },\n      'chromium-profile': {\n        describe: 'Path to a custom Chromium profile',\n        demandOption: false,\n        type: 'string',\n      },\n      'profile-create-if-missing': {\n        describe: 'Create the profile directory if it does not already exist',\n        demandOption: false,\n        type: 'boolean',\n      },\n      'keep-profile-changes': {\n        describe: 'Run Firefox directly in custom profile. Any changes to ' +\n                  'the profile will be saved.',\n        demandOption: false,\n        type: 'boolean',\n      },\n      'reload': {\n        describe: 'Reload the extension when source files change.' +\n          'Disable with --no-reload.',\n        demandOption: false,\n        default: true,\n        type: 'boolean',\n      },\n      'watch-file': {\n        alias: ['watch-files'],\n        describe: 'Reload the extension only when the contents of this' +\n                  ' file changes. This is useful if you use a custom' +\n                  ' build process for your extension',\n        demandOption: false,\n        type: 'array',\n      },\n      'watch-ignored': {\n        describe: 'Paths and globs patterns that should not be ' +\n                  'watched for changes. This is useful if you want ' +\n                  'to explicitly prevent web-ext from watching part ' +\n                  'of the extension directory tree, ' +\n                  'e.g. the node_modules folder.',\n        demandOption: false,\n        type: 'array',\n      },\n      'pre-install': {\n        describe: 'Pre-install the extension into the profile before ' +\n                  'startup. This is only needed to support older versions ' +\n                  'of Firefox.',\n        demandOption: false,\n        type: 'boolean',\n      },\n      'pref': {\n        describe: 'Launch firefox with a custom preference ' +\n                  '(example: --pref=general.useragent.locale=fr-FR). ' +\n                  'You can repeat this option to set more than one ' +\n                  'preference.',\n        demandOption: false,\n        requiresArg: true,\n        type: 'array',\n        coerce: (arg) => arg != null ?\n          coerceCLICustomPreference(arg) : undefined,\n      },\n      'start-url': {\n        alias: ['u', 'url'],\n        describe: 'Launch firefox at specified page',\n        demandOption: false,\n        type: 'array',\n      },\n      'browser-console': {\n        alias: ['bc'],\n        describe: 'Open the DevTools Browser Console.',\n        demandOption: false,\n        type: 'boolean',\n      },\n      'args': {\n        alias: ['arg'],\n        describe: 'Additional CLI options passed to the Browser binary',\n        demandOption: false,\n        type: 'array',\n      },\n      'firefox-preview': {\n        describe: 'Turn on developer preview features in Firefox' +\n          ' (defaults to \"mv3\")',\n        demandOption: false,\n        type: 'array',\n      },\n      // Firefox for Android CLI options.\n      'adb-bin': {\n        describe: 'Specify a custom path to the adb binary',\n        demandOption: false,\n        type: 'string',\n        requiresArg: true,\n      },\n      'adb-host': {\n        describe: 'Connect to adb on the specified host',\n        demandOption: false,\n        type: 'string',\n        requiresArg: true,\n      },\n      'adb-port': {\n        describe: 'Connect to adb on the specified port',\n        demandOption: false,\n        type: 'string',\n        requiresArg: true,\n      },\n      'adb-device': {\n        alias: ['android-device'],\n        describe: 'Connect to the specified adb device name',\n        demandOption: false,\n        type: 'string',\n        requiresArg: true,\n      },\n      'adb-discovery-timeout': {\n        describe: 'Number of milliseconds to wait before giving up',\n        demandOption: false,\n        type: 'number',\n        requiresArg: true,\n      },\n      'adb-remove-old-artifacts': {\n        describe: 'Remove old artifacts directories from the adb device',\n        demandOption: false,\n        type: 'boolean',\n      },\n      'firefox-apk': {\n        describe: (\n          'Run a specific Firefox for Android APK. ' +\n          'Example: org.mozilla.fennec_aurora'\n        ),\n        demandOption: false,\n        type: 'string',\n        requiresArg: true,\n      },\n      'firefox-apk-component': {\n        describe:\n          'Run a specific Android Component (defaults to <firefox-apk>/.App)',\n        demandOption: false,\n        type: 'string',\n        requiresArg: true,\n      },\n    })\n    .command('lint', 'Validate the extension source', commands.lint, {\n      'output': {\n        alias: 'o',\n        describe: 'The type of output to generate',\n        type: 'string',\n        default: 'text',\n        choices: ['json', 'text'],\n      },\n      'metadata': {\n        describe: 'Output only metadata as JSON',\n        type: 'boolean',\n        default: false,\n      },\n      'warnings-as-errors': {\n        describe: 'Treat warnings as errors by exiting non-zero for warnings',\n        alias: 'w',\n        type: 'boolean',\n        default: false,\n      },\n      'pretty': {\n        describe: 'Prettify JSON output',\n        type: 'boolean',\n        default: false,\n      },\n      'privileged': {\n        describe: 'Treat your extension as a privileged extension',\n        type: 'boolean',\n        default: false,\n      },\n      'self-hosted': {\n        describe:\n          'Your extension will be self-hosted. This disables messages ' +\n          'related to hosting on addons.mozilla.org.',\n        type: 'boolean',\n        default: false,\n      },\n      'boring': {\n        describe: 'Disables colorful shell output',\n        type: 'boolean',\n        default: false,\n      },\n    })\n    .command('docs', 'Open the web-ext documentation in a browser',\n             commands.docs, {});\n\n  return program.execute({getVersion, ...runOptions});\n}\n"],"mappings":"AACA,OAAOA,EAAP,MAAe,IAAf;AACA,OAAOC,IAAP,MAAiB,MAAjB;AACA,SAAQC,YAAR,QAA2B,IAA3B;AAEA,OAAOC,SAAP,MAAsB,WAAtB;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,MAAM,IAAIC,WAAnB,QAAsC,eAAtC;AAEA,OAAOC,eAAP,MAA4B,gBAA5B;AACA,SAAQC,UAAR,QAAyB,aAAzB;AACA,SACEC,YADF,EAEEC,aAAa,IAAIC,gBAFnB,QAGO,kBAHP;AAIA,SAAQC,yBAAR,QAAwC,0BAAxC;AACA,SAAQC,eAAe,IAAIC,oBAA3B,QAAsD,mBAAtD;AACA,SACEC,mBAAmB,IAAIC,sBADzB,EAEEC,gBAAgB,IAAIC,uBAFtB,EAGEC,iBAAiB,IAAIC,wBAHvB,QAIO,aAJP;AAMA,MAAMC,GAAG,GAAGZ,YAAY,CAACa,MAAM,CAACC,IAAP,CAAYC,GAAb,CAAxB;AACA,MAAMC,SAAS,GAAG,SAAlB,C,CACA;AACA;;AACA,MAAMC,gBAAgB,GAAG,gBAAgC,aAAzD;;AAwBA;AACA;AACA;AACA,OAAO,MAAMC,OAAN,CAAc;EAUnBC,WAAW,CACTC,IADS,EAET;IACEC,kBAAkB,GAAGC,OAAO,CAACC,GAAR;EADvB,IAEoB,EAJX,EAKT;IACA;IACA;IACA;IACA;IACAH,IAAI,GAAGA,IAAI,IAAIE,OAAO,CAACF,IAAR,CAAaI,KAAb,CAAmB,CAAnB,CAAf;IACA,KAAKC,WAAL,GAAmBL,IAAnB,CANA,CAQA;IACA;IACA;IACA;IACA;IACA;IACA;;IACA,MAAMM,aAAa,GAAG/B,KAAK,CAACyB,IAAD,EAAOC,kBAAP,CAA3B;IAEA,KAAKA,kBAAL,GAA0BA,kBAA1B;IACA,KAAKM,cAAL,GAAsB,KAAtB;IACA,KAAKC,iBAAL,GAAyB,IAAzB;IAEA,KAAKjC,KAAL,GAAa+B,aAAb;IACA,KAAK/B,KAAL,CAAWkC,mBAAX,CAA+B;MAC7B,oBAAoB;IADS,CAA/B;IAGA,KAAKlC,KAAL,CAAWmC,MAAX;IACA,KAAKnC,KAAL,CAAWoC,IAAX,CAAgB,KAAKpC,KAAL,CAAWqC,aAAX,EAAhB;IAEA,KAAKC,QAAL,GAAgB,EAAhB;IACA,KAAKC,OAAL,GAAe,EAAf;EACD;;EAEDC,OAAO,CACLC,IADK,EACSC,WADT,EAC8BC,QAD9B,EAELC,cAAsB,GAAG,EAFpB,EAGI;IACT,KAAKL,OAAL,CAAazC,SAAS,CAAC2C,IAAD,CAAtB,IAAgCG,cAAhC;IAEA,KAAK5C,KAAL,CAAWwC,OAAX,CAAmBC,IAAnB,EAAyBC,WAAzB,EAAuCG,WAAD,IAAiB;MACrD,IAAI,CAACD,cAAL,EAAqB;QACnB;MACD;;MACD,OAAOC,WAAW,CAChB;MACA;MACA;MAHgB,CAIfC,aAJI,CAIU,CAJV,EAIa,CAJb,EAIgBC,SAJhB,EAKU,0CALV,EAMJZ,MANI,GAOJa,WAPI,CAOQ,KAAKf,iBAPb,EAQL;MACA;MATK,CAUJgB,GAVI,CAUA5B,SAVA,EAWJkB,OAXI,CAWIK,cAXJ,CAAP;IAYD,CAhBD;IAiBA,KAAKN,QAAL,CAAcG,IAAd,IAAsBE,QAAtB;IACA,OAAO,IAAP;EACD;;EAEDO,gBAAgB,CAACX,OAAD,EAA2B;IACzC;IACA;IACA;IACA,KAAKA,OAAL,GAAe,EAAC,GAAG,KAAKA,OAAT;MAAkB,GAAGA;IAArB,CAAf;IACAY,MAAM,CAACC,IAAP,CAAYb,OAAZ,EAAqBc,OAArB,CAA8BC,GAAD,IAAS;MACpCf,OAAO,CAACe,GAAD,CAAP,CAAaC,MAAb,GAAsB,IAAtB;;MACA,IAAIhB,OAAO,CAACe,GAAD,CAAP,CAAaE,YAAb,KAA8BT,SAAlC,EAA6C;QAC3C;QACA;QACAR,OAAO,CAACe,GAAD,CAAP,CAAaE,YAAb,GAA4B,IAA5B;MACD;IACF,CAPD;IAQA,KAAKxD,KAAL,CAAWuC,OAAX,CAAmBA,OAAnB;IACA,OAAO,IAAP;EACD;;EAEDkB,iBAAiB,CACfC,SADe,EAEfC,OAFe,EAGT;IACN,IAAI,KAAK3B,cAAT,EAAyB;MACvB;IACD;;IAED0B,SAAS,CAACE,WAAV;IACA3C,GAAG,CAAC4C,IAAJ,CAAS,UAAT,EAAqBF,OAArB;IACA,KAAK3B,cAAL,GAAsB,IAAtB;EACD,CAtGkB,CAwGnB;EACA;;;EACA8B,YAAY,GAAW;IACrB;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA,MAAMC,kBAAkB,GACtB,KAAK/D,KAAL,CAAWgE,kBAAX,GAAgCC,qBAAhC,EADF;IAEA,MAAM;MAAEC;IAAF,IAAwBH,kBAA9B,CAZqB,CAarB;IACA;IACA;IACA;;IACA,KAAKI,eAAL,GAAuB,KAAKnE,KAAL,CAAWoE,kBAAX,EAAvB;;IACAL,kBAAkB,CAACG,iBAAnB,GAAuC,CAACG,IAAD,EAAOF,eAAP,KAA2B;MAChE,KAAKA,eAAL,GAAuBA,eAAvB;IACD,CAFD;;IAGA,IAAI1C,IAAJ;;IACA,IAAI;MACFA,IAAI,GAAG,KAAKzB,KAAL,CAAWyB,IAAlB;IACD,CAFD,CAEE,OAAO6C,GAAP,EAAY;MACZ,IAAIA,GAAG,CAAC7B,IAAJ,KAAa,QAAb,IACA6B,GAAG,CAACC,OAAJ,CAAYC,UAAZ,CAAuB,oBAAvB,CADJ,EACkD;QAChD,MAAM,IAAIpE,UAAJ,CAAekE,GAAG,CAACC,OAAnB,CAAN;MACD;;MACD,MAAMD,GAAN;IACD;;IACDP,kBAAkB,CAACG,iBAAnB,GAAuCA,iBAAvC,CA/BqB,CAiCrB;IACA;IACA;;IACA,IAAIzC,IAAI,CAACgD,eAAL,IAAwB,IAA5B,EAAkC;MAChChD,IAAI,CAACiD,iBAAL,GAAyB,CAACjD,IAAI,CAACgD,eAA/B;IACD;;IACD,IAAIhD,IAAI,CAACkD,MAAL,IAAe,IAAnB,EAAyB;MACvBlD,IAAI,CAACmD,QAAL,GAAgB,CAACnD,IAAI,CAACkD,MAAtB;IACD,CAzCoB,CA2CrB;IACA;IACA;IACA;IACA;;;IACA,IAAIlD,IAAI,CAACoD,KAAL,IAAc,IAAlB,EAAwB;MACtBpD,IAAI,CAACqD,OAAL,GAAe,CAACrD,IAAI,CAACoD,KAArB;IACD,CAlDoB,CAoDrB;IACA;;;IACA,IAAIpD,IAAI,CAACsD,WAAL,IAAoB,CAACtD,IAAI,CAACsD,WAAL,CAAiBC,MAA1C,EAAkD;MAChD,MAAM,IAAI5E,UAAJ,CAAe,8CAAf,CAAN;IACD;;IAED,IAAIqB,IAAI,CAACwD,QAAL,IAAiB,CAACxD,IAAI,CAACwD,QAAL,CAAcD,MAApC,EAA4C;MAC1C,MAAM,IAAI5E,UAAJ,CAAe,2CAAf,CAAN;IACD;;IAED,IAAI8E,KAAK,CAACC,OAAN,CAAc1D,IAAI,CAAC2D,cAAnB,KAAsC,CAAC3D,IAAI,CAAC2D,cAAL,CAAoBJ,MAA/D,EAAuE;MACrEvD,IAAI,CAAC2D,cAAL,GAAsB,CAAC,KAAD,CAAtB;IACD;;IAED,OAAO3D,IAAP;EACD,CA7KkB,CA+KnB;EACA;EACA;EACA;;;EACA4D,sBAAsB,CAACC,YAAD,EAA6B;IACjD,MAAMvB,kBAAkB,GACtB,KAAK/D,KAAL,CAAWgE,kBAAX,GAAgCC,qBAAhC,EADF;IAEAF,kBAAkB,CAACG,iBAAnB,CAAqCoB,YAArC,EAAmD,KAAKnB,eAAxD;EACD,CAvLkB,CAyLnB;EACA;;;EACAoB,wBAAwB,CAACC,aAAD,EAAgC;IACtD,MAAMC,GAAG,GAAGvF,WAAW,CAAC,KAAK4B,WAAN,CAAX,CAA8B4D,CAA9B,CAAgC,CAAhC,CAAZ;;IACA,MAAMzC,GAAG,GAAGuC,aAAa,CAACvC,GAAd,IAAqB,EAAjC;;IACA,MAAM0C,WAAW,GAAIC,CAAD,IAAO7F,UAAU,CACnCD,SAAS,CAAC8F,CAAC,CAACC,OAAF,CAAUxE,SAAV,EAAqB,EAArB,CAAD,CAD0B,EACE;MAACyE,SAAS,EAAE;IAAZ,CADF,CAArC;;IAIA,IAAIL,GAAJ,EAAS;MACPtC,MAAM,CAACC,IAAP,CAAYH,GAAZ,EACG8C,MADH,CACWH,CAAD,IAAOA,CAAC,CAACpB,UAAF,CAAanD,SAAb,CADjB,EAEGgC,OAFH,CAEYuC,CAAD,IAAO;QACd,MAAMI,MAAM,GAAGL,WAAW,CAACC,CAAD,CAA1B;QACA,MAAMK,SAAS,GAAG,KAAK1D,OAAL,CAAayD,MAAb,CAAlB;QACA,MAAME,MAAM,GAAG,KAAK3D,OAAL,CAAakD,GAAb,KAAqB,KAAKlD,OAAL,CAAakD,GAAb,EAAkBO,MAAlB,CAApC;;QAEA,IAAI,CAACC,SAAD,IAAc,CAACC,MAAnB,EAA2B;UACzBjF,GAAG,CAACkF,KAAJ,CAAW,eAAcP,CAAE,6BAA4BH,GAAI,EAA3D;UACA,OAAOxC,GAAG,CAAC2C,CAAD,CAAV;QACD;MACF,CAXH;IAYD;EACF;;EAEY,MAAPQ,OAAO,CACX;IACE3F,eAAe,GAAGC,oBADpB;IAEE8E,aAAa,GAAG7D,OAFlB;IAGE+B,SAAS,GAAGnD,gBAHd;IAIE8F,UAAU,GAAGC,oBAJf;IAKEvF,iBAAiB,GAAGC,wBALtB;IAMEL,mBAAmB,GAAGC,sBANxB;IAOEC,gBAAgB,GAAGC,uBAPrB;IAQEmB,iBAAiB,GAAG,IARtB;IASEsE,SAAS,GAAGjF;EATd,IAUoB,EAXT,EAYI;IACf,KAAKW,iBAAL,GAAyBA,iBAAzB;IACA,KAAKjC,KAAL,CAAWgD,WAAX,CAAuB,KAAKf,iBAA5B;IAEA,KAAKsD,wBAAL,CAA8BC,aAA9B;IACA,MAAM/D,IAAI,GAAG,KAAKqC,YAAL,EAAb;IAEA,MAAM2B,GAAG,GAAGhE,IAAI,CAACiE,CAAL,CAAO,CAAP,CAAZ;IAEA,MAAM/B,OAAO,GAAG,MAAM0C,UAAU,CAAC,KAAK3E,kBAAN,CAAhC;IACA,MAAM8E,UAAU,GAAG,KAAKlE,QAAL,CAAcmD,GAAd,CAAnB;;IAEA,IAAIhE,IAAI,CAACgF,OAAT,EAAkB;MAChB,KAAKhD,iBAAL,CAAuBC,SAAvB,EAAkCC,OAAlC;IACD;;IAED,IAAI2B,YAAY,GAAG,EAAC,GAAG7D;IAAJ,CAAnB;;IAEA,IAAI;MACF,IAAIgE,GAAG,KAAK1C,SAAZ,EAAuB;QACrB,MAAM,IAAI3C,UAAJ,CAAe,0CAAf,CAAN;MACD;;MACD,IAAI,CAACoG,UAAL,EAAiB;QACf,MAAM,IAAIpG,UAAJ,CAAgB,oBAAmBqF,GAAI,EAAvC,CAAN;MACD;;MACD,IAAIc,SAAS,KAAK,YAAlB,EAAgC;QAC9B9F,eAAe,CAAC;UAACkD;QAAD,CAAD,CAAf;MACD;;MAED,MAAM+C,WAAW,GAAG,EAApB;;MAEA,IAAIjF,IAAI,CAACgD,eAAT,EAA0B;QACxBxD,GAAG,CAACkF,KAAJ,CACE,+BACA,sCAFF;QAGA,MAAMQ,iBAAiB,GAAG,MAAMhG,mBAAmB,EAAnD;QACA+F,WAAW,CAACE,IAAZ,CAAiB,GAAGD,iBAApB;MACD,CAND,MAMO;QACL1F,GAAG,CAACkF,KAAJ,CAAU,8BAAV;MACD;;MAED,IAAI1E,IAAI,CAACoF,MAAT,EAAiB;QACfH,WAAW,CAACE,IAAZ,CAAiBhH,IAAI,CAACkH,OAAL,CAAarF,IAAI,CAACoF,MAAlB,CAAjB;MACD;;MAED,IAAIH,WAAW,CAAC1B,MAAhB,EAAwB;QACtB,MAAM+B,YAAY,GAAGL,WAAW,CAC7BM,GADkB,CACbC,CAAD,IAAOA,CAAC,CAACpB,OAAF,CAAUlE,OAAO,CAACC,GAAR,EAAV,EAAyB,GAAzB,CADO,EAElBoF,GAFkB,CAEbC,CAAD,IAAOA,CAAC,CAACpB,OAAF,CAAUlG,EAAE,CAACuH,OAAH,EAAV,EAAwB,GAAxB,CAFO,EAGlBC,IAHkB,CAGb,IAHa,CAArB;QAIAlG,GAAG,CAAC4C,IAAJ,CACE,yBACC,GAAE6C,WAAW,CAAC1B,MAAZ,KAAuB,CAAvB,GAA2B,GAA3B,GAAiC,EAAG,IADvC,GAEC,GAAE+B,YAAa,EAHlB;MAID;;MAEDL,WAAW,CAACrD,OAAZ,CAAqB+D,cAAD,IAAoB;QACtC,MAAMC,YAAY,GAAGxG,gBAAgB,CAACuG,cAAD,CAArC;QACA9B,YAAY,GAAGvE,iBAAiB,CAAC;UAC/BU,IAAI,EAAE6D,YADyB;UAE/BgC,WAAW,EAAE7F,IAFkB;UAG/B2F,cAH+B;UAI/BC,YAJ+B;UAK/B9E,OAAO,EAAE,KAAKA;QALiB,CAAD,CAAhC;MAOD,CATD;;MAWA,IAAI+C,YAAY,CAACmB,OAAjB,EAA0B;QACxB;QACA,KAAKhD,iBAAL,CAAuBC,SAAvB,EAAkCC,OAAlC;MACD;;MAED,KAAK0B,sBAAL,CAA4BC,YAA5B;MAEA,MAAMkB,UAAU,CAAClB,YAAD,EAAe;QAACrD;MAAD,CAAf,CAAhB;IAED,CA1DD,CA0DE,OAAOsF,KAAP,EAAc;MACd,IAAI,EAAEA,KAAK,YAAYnH,UAAnB,KAAkCkF,YAAY,CAACmB,OAAnD,EAA4D;QAC1DxF,GAAG,CAACsG,KAAJ,CAAW,KAAIA,KAAK,CAACC,KAAM,IAA3B;MACD,CAFD,MAEO;QACLvG,GAAG,CAACsG,KAAJ,CAAW,KAAIE,MAAM,CAACF,KAAD,CAAQ,IAA7B;MACD;;MACD,IAAIA,KAAK,CAACG,IAAV,EAAgB;QACdzG,GAAG,CAACsG,KAAJ,CAAW,eAAcA,KAAK,CAACG,IAAK,IAApC;MACD;;MAEDzG,GAAG,CAACkF,KAAJ,CAAW,qBAAoBV,GAAI,EAAnC;;MAEA,IAAI,KAAKxD,iBAAT,EAA4B;QAC1BuD,aAAa,CAACmC,IAAd,CAAmB,CAAnB;MACD,CAFD,MAEO;QACL,MAAMJ,KAAN;MACD;IACF;EACF;;AA5TkB,C,CA+TrB;;AAKA,OAAO,eAAejB,oBAAf,CACL5E,kBADK,EAEL;EAAC6E,SAAS,GAAGjF;AAAb,IAAuD,EAFlD,EAGY;EACjB,IAAIiF,SAAS,KAAK,YAAlB,EAAgC;IAC9BtF,GAAG,CAACkF,KAAJ,CAAU,uCAAV;IACA,MAAMyB,WAAgB,GAAG/H,YAAY,CACnCD,IAAI,CAACuH,IAAL,CAAUzF,kBAAV,EAA8B,cAA9B,CADmC,CAArC;IAEA,OAAOmG,IAAI,CAACC,KAAL,CAAWF,WAAX,EAAwBjE,OAA/B;EACD,CALD,MAKO;IACL1C,GAAG,CAACkF,KAAJ,CAAU,uCAAV,EADK,CAEL;IACA;IACA;IACA;;IACA,MAAM4B,GAAG,GAAG,MAAM,OAAO,cAAP,CAAlB;IACA,OAAQ,GAAEA,GAAG,CAACC,MAAJ,CAAWtG,kBAAX,CAA+B,IAAGqG,GAAG,CAACE,IAAJ,CAASvG,kBAAT,CAA6B,EAAzE;EACD;AACF,C,CAED;;AASA,OAAO,SAASwG,sBAAT,CAAgCC,YAAhC,EAA2D;EAChE,OAAQC,KAAD,IAAqB;IAC1B,IAAIlD,KAAK,CAACC,OAAN,CAAciD,KAAd,CAAJ,EAA0B;MACxB,MAAM,IAAIhI,UAAJ,CAAe+H,YAAf,CAAN;IACD;;IACD,OAAOC,KAAP;EACD,CALD;AAMD;AAED,OAAO,eAAeC,IAAf,CACL3G,kBADK,EAEL;EACE2E,UAAU,GAAGC,oBADf;EACqChE,QAAQ,GAAGnC,eADhD;EACiEsB,IADjE;EAEE6G,UAAU,GAAG;AAFf,IAGgB,EALX,EAMS;EACd,MAAMC,OAAO,GAAG,IAAIhH,OAAJ,CAAYE,IAAZ,EAAkB;IAACC;EAAD,CAAlB,CAAhB;EACA,MAAMiC,OAAO,GAAG,MAAM0C,UAAU,CAAC3E,kBAAD,CAAhC,CAFc,CAId;EACA;EACA;;EACA6G,OAAO,CAACvI,KAAR,CACGwI,KADH,CACU;AACZ;AACA;AACA,QAAQnH,SAAU,oBAAmBA,SAAU;AAC/C;AACA;AACA;AACA;AACA,CATE,EAUGoH,IAVH,CAUQ,MAVR,EAWGC,KAXH,CAWS,GAXT,EAWc,MAXd,EAYGzF,GAZH,CAYO5B,SAZP,EAaGsC,OAbH,CAaWA,OAbX,EAcGb,aAdH,CAciB,CAdjB,EAcoB,4BAdpB,EAeGX,MAfH,GAgBGwG,iBAhBH;EAkBAJ,OAAO,CAACrF,gBAAR,CAAyB;IACvB,cAAc;MACZwF,KAAK,EAAE,GADK;MAEZE,QAAQ,EAAE,iCAFE;MAGZC,OAAO,EAAElH,OAAO,CAACC,GAAR,EAHG;MAIZkH,WAAW,EAAE,IAJD;MAKZC,IAAI,EAAE,QALM;MAMZC,MAAM,EAAGC,GAAD,IAASA,GAAG,IAAI,IAAP,GAAcrJ,IAAI,CAACkH,OAAL,CAAamC,GAAb,CAAd,GAAkClG;IANvC,CADS;IASvB,iBAAiB;MACf2F,KAAK,EAAE,GADQ;MAEfE,QAAQ,EAAE,0CAFK;MAGfC,OAAO,EAAEjJ,IAAI,CAACuH,IAAL,CAAUxF,OAAO,CAACC,GAAR,EAAV,EAAyB,mBAAzB,CAHM;MAIfsH,SAAS,EAAE,IAJI;MAKfJ,WAAW,EAAE,IALE;MAMfC,IAAI,EAAE;IANS,CATM;IAiBvB,WAAW;MACTL,KAAK,EAAE,GADE;MAETE,QAAQ,EAAE,qBAFD;MAGTG,IAAI,EAAE,SAHG;MAITvF,YAAY,EAAE;IAJL,CAjBY;IAuBvB,gBAAgB;MACdkF,KAAK,EAAE,GADO;MAEdE,QAAQ,EAAE,6DACA,qDADA,GAEA,+BAJI;MAKdpF,YAAY,EAAE,KALA;MAMd;MACA;MACA;MACA;MACAuF,IAAI,EAAE;IAVQ,CAvBO;IAmCvB,YAAY;MACVH,QAAQ,EAAE,kDADA;MAEVG,IAAI,EAAE,SAFI;MAGVvF,YAAY,EAAE;IAHJ,CAnCW;IAwCvB,SAAS;MACP;MACA;MACA2F,MAAM,EAAE,IAHD;MAIPJ,IAAI,EAAE,SAJC;MAKPvF,YAAY,EAAE;IALP,CAxCc;IA+CvB,UAAU;MACRkF,KAAK,EAAE,GADC;MAERE,QAAQ,EAAE,2CACR,iBAHM;MAIRC,OAAO,EAAE9F,SAJD;MAKRS,YAAY,EAAE,KALN;MAMRsF,WAAW,EAAE,IANL;MAORC,IAAI,EAAE;IAPE,CA/Ca;IAwDvB,oBAAoB;MAClBH,QAAQ,EAAE,iDACR,wDAFgB;MAGlBpF,YAAY,EAAE,KAHI;MAIlBqF,OAAO,EAAE,IAJS;MAKlBE,IAAI,EAAE;IALY;EAxDG,CAAzB;EAiEAR,OAAO,CACJ/F,OADH,CAEI,OAFJ,EAGI,yCAHJ,EAIIF,QAAQ,CAAC8G,KAJb,EAIoB;IACd,aAAa;MACXR,QAAQ,EAAE,+CADC;MAEXG,IAAI,EAAE;IAFK,CADC;IAKd,YAAY;MACVL,KAAK,EAAE,GADG;MAEVE,QAAQ,EAAE,6CAFA;MAGVC,OAAO,EAAE9F,SAHC;MAIVmG,SAAS,EAAE,KAJD;MAKV1F,YAAY,EAAE,KALJ;MAMVsF,WAAW,EAAE,IANH;MAOVC,IAAI,EAAE,QAPI;MAQVC,MAAM,EAAGC,GAAD,IAASA,GAAG,IAAI,IAAP,GACflG,SADe,GACHmF,sBAAsB,CAChC,+CADgC,CAAtB,CAEVe,GAFU;IATJ,CALE;IAkBd,kBAAkB;MAChBP,KAAK,EAAE,GADS;MAEhBE,QAAQ,EAAE,6CAFM;MAGhBG,IAAI,EAAE;IAHU;EAlBJ,CAJpB,EA4BGvG,OA5BH,CA6BI,MA7BJ,EA8BI,sDA9BJ,EA+BIF,QAAQ,CAAC+G,IA/Bb,EA+BmB;IACb,WAAW;MACTT,QAAQ,EAAE,8CADD;MAETpF,YAAY,EAAE,IAFL;MAGTuF,IAAI,EAAE;IAHG,CADE;IAMb,cAAc;MACZH,QAAQ,EAAE,iDADE;MAEZpF,YAAY,EAAE,IAFF;MAGZuF,IAAI,EAAE;IAHM,CAND;IAWb,kBAAkB;MAChBH,QAAQ,EAAE,wBADM;MAEhBC,OAAO,EAAE,mCAFO;MAGhBrF,YAAY,EAAE,IAHE;MAIhBuF,IAAI,EAAE;IAJU,CAXL;IAiBb,aAAa;MACXH,QAAQ,EACN,4CACA,kCAHS;MAIXpF,YAAY,EAAE,KAJH;MAKXuF,IAAI,EAAE;IALK,CAjBA;IAwBb,MAAM;MACJH,QAAQ,EACN,8DACA,4DAHE;MAIJpF,YAAY,EAAE,KAJV;MAKJuF,IAAI,EAAE;IALF,CAxBO;IA+Bb,WAAW;MACTH,QAAQ,EAAE,iDADD;MAETG,IAAI,EAAE;IAFG,CA/BE;IAmCb,WAAW;MACTH,QAAQ,EAAE,qDACV,4BAFS;MAGTG,IAAI,EAAE;IAHG;EAnCE,CA/BnB,EAwEGvG,OAxEH,CAwEW,KAxEX,EAwEkB,mBAxElB,EAwEuCF,QAAQ,CAACgH,GAxEhD,EAwEqD;IACjD,UAAU;MACRZ,KAAK,EAAE,GADC;MAERE,QAAQ,EAAE,2DACA,iDAHF;MAIRC,OAAO,EAAE,iBAJD;MAKRrF,YAAY,EAAE,KALN;MAMRuF,IAAI,EAAE,OANE;MAORQ,OAAO,EAAE,CAAC,iBAAD,EAAoB,iBAApB,EAAuC,UAAvC;IAPD,CADuC;IAUjD,WAAW;MACTb,KAAK,EAAE,CAAC,GAAD,EAAM,gBAAN,CADE;MAETE,QAAQ,EAAE,+DACA,kBADA,GAEA,sDAFA,GAGA,2DAHA,GAIA,mDAJA,GAKA,uDALA,GAMA,8CARD;MASTpF,YAAY,EAAE,KATL;MAUTuF,IAAI,EAAE;IAVG,CAVsC;IAsBjD,mBAAmB;MACjBL,KAAK,EAAE,GADU;MAEjBE,QAAQ,EAAE,2DACA,yDADA,GAEA,0DAFA,GAGA,0CALO;MAMjBpF,YAAY,EAAE,KANG;MAOjBuF,IAAI,EAAE;IAPW,CAtB8B;IA+BjD,mBAAmB;MACjBH,QAAQ,EAAE,oDACR,qDADQ,GAER,2DAHe;MAIjBpF,YAAY,EAAE,KAJG;MAKjBuF,IAAI,EAAE;IALW,CA/B8B;IAsCjD,oBAAoB;MAClBH,QAAQ,EAAE,mCADQ;MAElBpF,YAAY,EAAE,KAFI;MAGlBuF,IAAI,EAAE;IAHY,CAtC6B;IA2CjD,6BAA6B;MAC3BH,QAAQ,EAAE,2DADiB;MAE3BpF,YAAY,EAAE,KAFa;MAG3BuF,IAAI,EAAE;IAHqB,CA3CoB;IAgDjD,wBAAwB;MACtBH,QAAQ,EAAE,4DACA,4BAFY;MAGtBpF,YAAY,EAAE,KAHQ;MAItBuF,IAAI,EAAE;IAJgB,CAhDyB;IAsDjD,UAAU;MACRH,QAAQ,EAAE,mDACR,2BAFM;MAGRpF,YAAY,EAAE,KAHN;MAIRqF,OAAO,EAAE,IAJD;MAKRE,IAAI,EAAE;IALE,CAtDuC;IA6DjD,cAAc;MACZL,KAAK,EAAE,CAAC,aAAD,CADK;MAEZE,QAAQ,EAAE,wDACA,mDADA,GAEA,mCAJE;MAKZpF,YAAY,EAAE,KALF;MAMZuF,IAAI,EAAE;IANM,CA7DmC;IAqEjD,iBAAiB;MACfH,QAAQ,EAAE,iDACA,kDADA,GAEA,mDAFA,GAGA,mCAHA,GAIA,+BALK;MAMfpF,YAAY,EAAE,KANC;MAOfuF,IAAI,EAAE;IAPS,CArEgC;IA8EjD,eAAe;MACbH,QAAQ,EAAE,uDACA,yDADA,GAEA,aAHG;MAIbpF,YAAY,EAAE,KAJD;MAKbuF,IAAI,EAAE;IALO,CA9EkC;IAqFjD,QAAQ;MACNH,QAAQ,EAAE,6CACA,oDADA,GAEA,kDAFA,GAGA,aAJJ;MAKNpF,YAAY,EAAE,KALR;MAMNsF,WAAW,EAAE,IANP;MAONC,IAAI,EAAE,OAPA;MAQNC,MAAM,EAAGC,GAAD,IAASA,GAAG,IAAI,IAAP,GACfzI,yBAAyB,CAACyI,GAAD,CADV,GACkBlG;IAT7B,CArFyC;IAgGjD,aAAa;MACX2F,KAAK,EAAE,CAAC,GAAD,EAAM,KAAN,CADI;MAEXE,QAAQ,EAAE,kCAFC;MAGXpF,YAAY,EAAE,KAHH;MAIXuF,IAAI,EAAE;IAJK,CAhGoC;IAsGjD,mBAAmB;MACjBL,KAAK,EAAE,CAAC,IAAD,CADU;MAEjBE,QAAQ,EAAE,oCAFO;MAGjBpF,YAAY,EAAE,KAHG;MAIjBuF,IAAI,EAAE;IAJW,CAtG8B;IA4GjD,QAAQ;MACNL,KAAK,EAAE,CAAC,KAAD,CADD;MAENE,QAAQ,EAAE,qDAFJ;MAGNpF,YAAY,EAAE,KAHR;MAINuF,IAAI,EAAE;IAJA,CA5GyC;IAkHjD,mBAAmB;MACjBH,QAAQ,EAAE,kDACR,sBAFe;MAGjBpF,YAAY,EAAE,KAHG;MAIjBuF,IAAI,EAAE;IAJW,CAlH8B;IAwHjD;IACA,WAAW;MACTH,QAAQ,EAAE,yCADD;MAETpF,YAAY,EAAE,KAFL;MAGTuF,IAAI,EAAE,QAHG;MAITD,WAAW,EAAE;IAJJ,CAzHsC;IA+HjD,YAAY;MACVF,QAAQ,EAAE,sCADA;MAEVpF,YAAY,EAAE,KAFJ;MAGVuF,IAAI,EAAE,QAHI;MAIVD,WAAW,EAAE;IAJH,CA/HqC;IAqIjD,YAAY;MACVF,QAAQ,EAAE,sCADA;MAEVpF,YAAY,EAAE,KAFJ;MAGVuF,IAAI,EAAE,QAHI;MAIVD,WAAW,EAAE;IAJH,CArIqC;IA2IjD,cAAc;MACZJ,KAAK,EAAE,CAAC,gBAAD,CADK;MAEZE,QAAQ,EAAE,0CAFE;MAGZpF,YAAY,EAAE,KAHF;MAIZuF,IAAI,EAAE,QAJM;MAKZD,WAAW,EAAE;IALD,CA3ImC;IAkJjD,yBAAyB;MACvBF,QAAQ,EAAE,iDADa;MAEvBpF,YAAY,EAAE,KAFS;MAGvBuF,IAAI,EAAE,QAHiB;MAIvBD,WAAW,EAAE;IAJU,CAlJwB;IAwJjD,4BAA4B;MAC1BF,QAAQ,EAAE,sDADgB;MAE1BpF,YAAY,EAAE,KAFY;MAG1BuF,IAAI,EAAE;IAHoB,CAxJqB;IA6JjD,eAAe;MACbH,QAAQ,EACN,6CACA,oCAHW;MAKbpF,YAAY,EAAE,KALD;MAMbuF,IAAI,EAAE,QANO;MAObD,WAAW,EAAE;IAPA,CA7JkC;IAsKjD,yBAAyB;MACvBF,QAAQ,EACN,mEAFqB;MAGvBpF,YAAY,EAAE,KAHS;MAIvBuF,IAAI,EAAE,QAJiB;MAKvBD,WAAW,EAAE;IALU;EAtKwB,CAxErD,EAsPGtG,OAtPH,CAsPW,MAtPX,EAsPmB,+BAtPnB,EAsPoDF,QAAQ,CAACkH,IAtP7D,EAsPmE;IAC/D,UAAU;MACRd,KAAK,EAAE,GADC;MAERE,QAAQ,EAAE,gCAFF;MAGRG,IAAI,EAAE,QAHE;MAIRF,OAAO,EAAE,MAJD;MAKRU,OAAO,EAAE,CAAC,MAAD,EAAS,MAAT;IALD,CADqD;IAQ/D,YAAY;MACVX,QAAQ,EAAE,8BADA;MAEVG,IAAI,EAAE,SAFI;MAGVF,OAAO,EAAE;IAHC,CARmD;IAa/D,sBAAsB;MACpBD,QAAQ,EAAE,2DADU;MAEpBF,KAAK,EAAE,GAFa;MAGpBK,IAAI,EAAE,SAHc;MAIpBF,OAAO,EAAE;IAJW,CAbyC;IAmB/D,UAAU;MACRD,QAAQ,EAAE,sBADF;MAERG,IAAI,EAAE,SAFE;MAGRF,OAAO,EAAE;IAHD,CAnBqD;IAwB/D,cAAc;MACZD,QAAQ,EAAE,gDADE;MAEZG,IAAI,EAAE,SAFM;MAGZF,OAAO,EAAE;IAHG,CAxBiD;IA6B/D,eAAe;MACbD,QAAQ,EACN,gEACA,2CAHW;MAIbG,IAAI,EAAE,SAJO;MAKbF,OAAO,EAAE;IALI,CA7BgD;IAoC/D,UAAU;MACRD,QAAQ,EAAE,gCADF;MAERG,IAAI,EAAE,SAFE;MAGRF,OAAO,EAAE;IAHD;EApCqD,CAtPnE,EAgSGrG,OAhSH,CAgSW,MAhSX,EAgSmB,6CAhSnB,EAiSWF,QAAQ,CAACmH,IAjSpB,EAiS0B,EAjS1B;EAmSA,OAAOlB,OAAO,CAACnC,OAAR,CAAgB;IAACC,UAAD;IAAa,GAAGiC;EAAhB,CAAhB,CAAP;AACD"}